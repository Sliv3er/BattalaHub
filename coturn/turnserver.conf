# Battala Hub STUN/TURN Server Configuration

# STUN server port
listening-port=3478
# TLS listening port
tls-listening-port=5349

# External IP (auto-detect in Docker)
external-ip=auto

# Relay ports range
min-port=49160
max-port=49200

# Enable verbose logging for debugging
verbose

# Disable telnet CLI
no-cli

# Enable authentication
lt-cred-mech

# User credentials for TURN authentication
user=battala:battala123

# Server name
server-name=battala-turn-server

# Database for users (not using external DB for simplicity)
userdb=/var/lib/coturn/turndb

# Enable fingerprinting
fingerprint

# Use short-term credentials
use-auth-secret
static-auth-secret=battala-secret-key

# Server certificate (for TLS)
# cert=/etc/ssl/certs/turn_server_cert.pem
# pkey=/etc/ssl/private/turn_server_pkey.pem

# Allow/deny rules
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=127.0.0.0-127.255.255.255
denied-peer-ip=169.254.0.0-169.254.255.255

# Allow peer connections
no-multicast-peers

# Log file
log-file=/var/log/turn.log
no-stdout-log